<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1315836547691" ID="ID_975992855" MODIFIED="1315836557824" TEXT="wCMF History / Versioning">
<node CREATED="1315836571489" ID="ID_339082498" MODIFIED="1315836576589" POSITION="right" TEXT="Modeling">
<node CREATED="1315836578194" ID="ID_1706717399" MODIFIED="1315845852690" TEXT="Attributes and Associations have directed &quot;versionable&quot; tag"/>
<node CREATED="1315836841019" ID="ID_951014572" MODIFIED="1315836850527" TEXT="behaviours for associations">
<node CREATED="1315837168234" ID="ID_1096623886" MODIFIED="1315837198185" TEXT="association kind">
<node CREATED="1315837203725" ID="ID_370962128" MODIFIED="1315837205121" TEXT="composite">
<node CREATED="1315836808970" ID="ID_689151090" MODIFIED="1315836816126" TEXT="&quot;versionable&quot; associations are included"/>
</node>
<node CREATED="1315837205637" ID="ID_715336064" MODIFIED="1315837208002" TEXT="other">
<node CREATED="1315836792945" ID="ID_1006198899" MODIFIED="1315836805829" TEXT="&quot;versionable&quot; associations are linked"/>
</node>
</node>
</node>
</node>
<node CREATED="1315837682933" ID="ID_1522563809" MODIFIED="1315837696021" POSITION="right" TEXT="behaviour">
<node CREATED="1315837696458" ID="ID_53370796" MODIFIED="1315837698198" TEXT="record">
<node CREATED="1315837704907" ID="ID_1860968351" MODIFIED="1315837734127" TEXT="Class has no versionable members">
<node CREATED="1315837734547" ID="ID_181246969" MODIFIED="1315837738279" TEXT="nothing"/>
</node>
<node CREATED="1315837739707" ID="ID_608623380" MODIFIED="1315837909600" TEXT="Class has versionable members">
<node CREATED="1315837752471" ID="ID_42691847" MODIFIED="1315837763987" TEXT="attribute">
<node CREATED="1315837826337" ID="ID_1814903586" MODIFIED="1315837843679" TEXT="versionable tag set">
<node CREATED="1315837764391" ID="ID_1992849392" MODIFIED="1315837775540" TEXT="old content in history"/>
<node CREATED="1315837776183" ID="ID_664395569" MODIFIED="1315841414399" TEXT="new content in history and object">
<node CREATED="1315841556406" ID="ID_1450937815" MODIFIED="1315841610359" TEXT="reason for history: Replay does not need to search next applyable version"/>
</node>
</node>
<node CREATED="1315837844906" ID="ID_892017772" MODIFIED="1315837849711" TEXT="versionable tag not set">
<node CREATED="1315837850147" ID="ID_671082292" MODIFIED="1315837851671" TEXT="nothing"/>
</node>
</node>
<node CREATED="1315837786020" ID="ID_496523969" MODIFIED="1315837789137" TEXT="association">
<node CREATED="1315837863476" ID="ID_1269213374" MODIFIED="1315837867985" TEXT="versionable tag set">
<node CREATED="1315836850820" ID="ID_1010153760" MODIFIED="1315836853616" TEXT="linked">
<node CREATED="1315836853949" ID="ID_1545978016" MODIFIED="1315841468245" TEXT="old target oid in history"/>
<node CREATED="1315841468865" ID="ID_37318514" MODIFIED="1315841474542" TEXT="new target oid in history and object"/>
</node>
<node CREATED="1315836870507" ID="ID_851430667" MODIFIED="1315836873935" TEXT="included">
<node CREATED="1315836874380" ID="ID_1972855135" MODIFIED="1315841488270" TEXT="old target object content in history, &quot;Tree Path&quot; of root object is applied recursively"/>
<node CREATED="1315841489362" ID="ID_1318625899" MODIFIED="1315841536613" TEXT="new target object content in history and object, &quot;Tree Path&quot; of root object is applied recursivcely"/>
</node>
</node>
<node CREATED="1315837868389" ID="ID_1679281877" MODIFIED="1315837871833" TEXT="versionable tag not set">
<node CREATED="1315837872141" ID="ID_1612107068" MODIFIED="1315837873745" TEXT="nothing"/>
</node>
</node>
</node>
</node>
<node CREATED="1315837699530" ID="ID_1965471400" MODIFIED="1315837700814" TEXT="replay">
<node CREATED="1315837937766" ID="ID_150544904" MODIFIED="1315837944251" TEXT="Class has no versionable members">
<node CREATED="1315837944567" ID="ID_1647887772" MODIFIED="1315837947251" TEXT="cannot happen"/>
</node>
<node CREATED="1315837739707" ID="ID_583327975" MODIFIED="1315837909600" TEXT="Class has versionable members">
<node CREATED="1315837752471" ID="ID_675990263" MODIFIED="1316082104465" TEXT="attribute">
<node CREATED="1315837826337" ID="ID_1173317930" MODIFIED="1315842084778" TEXT="versionable tag set">
<node CREATED="1315847436199" ID="ID_788327087" MODIFIED="1315847442517" TEXT="same value">
<node CREATED="1315847442800" ID="ID_1719711983" MODIFIED="1315847443885" TEXT="hide"/>
</node>
<node CREATED="1315847445161" ID="ID_438215423" MODIFIED="1315847448731" TEXT="different value">
<node CREATED="1315847448732" ID="ID_1177676802" MODIFIED="1315847471858" TEXT="selectable in tree">
<node CREATED="1315841999177" ID="ID_1709972666" MODIFIED="1315842019217" TEXT="user has selected attribute">
<node CREATED="1315837764391" ID="ID_1407195318" MODIFIED="1315841920193" TEXT="restored content in new history entry and object"/>
<node CREATED="1315837776183" ID="ID_1124895570" MODIFIED="1315841937347" TEXT="old object content in new history entry"/>
</node>
<node CREATED="1315842002778" ID="ID_1657266117" MODIFIED="1315842003734" TEXT="user has not selected attribute">
<node CREATED="1315842032077" ID="ID_1837263036" MODIFIED="1315842036803" TEXT="don&apos;t change object"/>
<node CREATED="1315842037302" ID="ID_555688842" MODIFIED="1315842046188" TEXT="object content in new history entry"/>
</node>
</node>
</node>
</node>
<node CREATED="1315837844906" ID="ID_54443817" MODIFIED="1315841998214" TEXT="versionable tag not set">
<node CREATED="1315837850147" ID="ID_1454901490" MODIFIED="1315841954389" TEXT="don&apos;t change object"/>
</node>
</node>
<node CREATED="1315837786020" ID="ID_1700320272" MODIFIED="1316082141248" TEXT="association">
<node CREATED="1315837863476" ID="ID_581919631" MODIFIED="1315845765822" TEXT="versionable tag set">
<node CREATED="1315845909345" ID="ID_1676842866" MODIFIED="1315846234978" TEXT="user sees list with links from history">
<node CREATED="1315846237460" ID="ID_1572361319" MODIFIED="1315850452907" TEXT="linked">
<node CREATED="1315846044425" ID="ID_111654718" MODIFIED="1315846055895" TEXT="all links currently exist">
<node CREATED="1315846056322" ID="ID_1657736299" MODIFIED="1315846259851" TEXT="don&apos;t show list"/>
</node>
<node CREATED="1315846374683" ID="ID_1313951507" MODIFIED="1315847324402" TEXT="link currently exist">
<node CREATED="1315846384219" ID="ID_1878097846" MODIFIED="1315846390475" TEXT="omit this link"/>
</node>
<node CREATED="1315847329954" ID="ID_302415903" MODIFIED="1315848496667" TEXT="linked object deleted (flag or physical)">
<node CREATED="1315847336227" ID="ID_392951613" MODIFIED="1315847344338" TEXT="show grey"/>
</node>
<node CREATED="1315842501817" ID="ID_968654454" MODIFIED="1315842572683" TEXT="user has selected at least one associated object">
<node CREATED="1315842629358" ID="ID_806350503" MODIFIED="1315842637996" TEXT="selected associated objects">
<node CREATED="1315843573308" ID="ID_315990566" MODIFIED="1315843748293" TEXT="restore link in object"/>
</node>
</node>
</node>
<node CREATED="1315846239875" ID="ID_1503471167" MODIFIED="1316082049430" TEXT="included">
<node CREATED="1315846462747" ID="ID_1845357054" MODIFIED="1315846470777" TEXT="link currently exist">
<node CREATED="1315846471156" ID="ID_555272990" MODIFIED="1315846480666" TEXT="deep equals is true">
<node CREATED="1315846481012" ID="ID_1891406459" MODIFIED="1315846486891" TEXT="omit this link"/>
</node>
<node CREATED="1315847381007" ID="ID_1389087059" MODIFIED="1315847387940" TEXT="deep equals is false">
<node CREATED="1315847388511" ID="ID_656393247" MODIFIED="1315847412489" TEXT="recursively show members">
<node CREATED="1315847546382" ID="ID_827780702" MODIFIED="1315847548332" TEXT="attribute">
<node CREATED="1315847692978" ID="ID_1502918650" MODIFIED="1315847699975" TEXT="see above">
<node CREATED="1315847925480" ID="ID_1591174532" MODIFIED="1316082104465" TEXT="update attribute">
<arrowlink DESTINATION="ID_675990263" ENDARROW="Default" ENDINCLINATION="1047;0;" ID="Arrow_ID_1442170626" STARTARROW="None" STARTINCLINATION="-261;-311;"/>
</node>
</node>
</node>
<node CREATED="1315847702714" ID="ID_1197966870" MODIFIED="1315847707888" TEXT="association">
<node CREATED="1315847718073" ID="ID_1644654492" MODIFIED="1316082141247" TEXT="see left">
<arrowlink DESTINATION="ID_1700320272" ENDARROW="Default" ENDINCLINATION="765;-143;" ID="Arrow_ID_1911805600" STARTARROW="None" STARTINCLINATION="-23;-50;"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1315847806533" ID="ID_1233030549" MODIFIED="1315847815419" TEXT="link doesn&apos;t exist">
<node CREATED="1315847388511" ID="ID_775882830" MODIFIED="1315847412489" TEXT="recursively show members">
<node CREATED="1315847546382" ID="ID_1181099810" MODIFIED="1315847548332" TEXT="attribute">
<node CREATED="1315847692978" ID="ID_685962902" MODIFIED="1315847699975" TEXT="see above">
<node CREATED="1315847933768" ID="ID_1063455022" MODIFIED="1315850452907" TEXT="update attribute or linked association">
<arrowlink DESTINATION="ID_1572361319" ENDARROW="Default" ENDINCLINATION="-10;-26;" ID="Arrow_ID_363495102" STARTARROW="None" STARTINCLINATION="-343;-344;"/>
<node CREATED="1315850234334" ID="ID_1184275397" MODIFIED="1315850247507" TEXT="intermediate object exists with deleted flag">
<node CREATED="1315850247903" ID="ID_81673096" MODIFIED="1315850253846" TEXT="undelete, update"/>
</node>
<node CREATED="1315850286179" ID="ID_1313484851" MODIFIED="1315850296105" TEXT="intermediate object does not exist">
<node CREATED="1315850296612" ID="ID_582650103" MODIFIED="1315850303082" TEXT="create new, set values"/>
</node>
</node>
</node>
</node>
<node CREATED="1315847702714" ID="ID_1230277242" MODIFIED="1315847707888" TEXT="association">
<node CREATED="1315847718073" ID="ID_314030400" MODIFIED="1316082120834" TEXT="see left">
<arrowlink DESTINATION="ID_1700320272" ENDARROW="Default" ENDINCLINATION="317;31;" ID="Arrow_ID_273846950" STARTARROW="None" STARTINCLINATION="-168;65;"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1315842574758" ID="ID_1420540032" MODIFIED="1315850479704" TEXT="user has selected nothing inside this association">
<node CREATED="1315850520853" ID="ID_1371328913" MODIFIED="1315850527860" TEXT="don&apos;t change object"/>
</node>
<node CREATED="1315850550737" ID="ID_1737307204" MODIFIED="1315850554087" TEXT="postprocessing">
<node CREATED="1315851136581" ID="ID_1353580644" MODIFIED="1315851157670" TEXT="save new history entry">
<node CREATED="1315851158152" ID="ID_1644480933" MODIFIED="1315851170975" TEXT="1. undelete required object"/>
<node CREATED="1315851171425" ID="ID_999093387" MODIFIED="1315851189324" TEXT="2. if required object not undeletable, create"/>
<node CREATED="1315851193425" ID="ID_364041800" MODIFIED="1315851318413" TEXT="3. include all undeleted/created objects"/>
<node CREATED="1315851319287" ID="ID_614195841" MODIFIED="1315851324877" TEXT="4. link all linked objects"/>
<node CREATED="1315851325647" ID="ID_1123992594" MODIFIED="1315851340932" TEXT="5. update all attribute"/>
</node>
</node>
</node>
</node>
<node CREATED="1315837868389" ID="ID_1251217792" MODIFIED="1315837871833" TEXT="versionable tag not set">
<node CREATED="1315837850147" ID="ID_627314569" MODIFIED="1315841954389" TEXT="don&apos;t change object"/>
</node>
</node>
</node>
<node CREATED="1316081396658" ID="ID_567757720" MODIFIED="1316081403706" TEXT="undelete (Controller)">
<node CREATED="1316081456687" ID="ID_608960246" MODIFIED="1316081462694" TEXT="associations">
<node CREATED="1316081463159" ID="ID_463815613" MODIFIED="1316081465102" TEXT="linked">
<node CREATED="1316081484721" ID="ID_1693934578" MODIFIED="1316081497306" TEXT="x..1">
<node CREATED="1316081497987" ID="ID_1493305128" MODIFIED="1316081517947" TEXT="link target deleted (flag or physical)">
<node CREATED="1316081518332" ID="ID_1080346965" MODIFIED="1316081690851" TEXT="nullifiy field"/>
<node CREATED="1316081895649" ID="ID_1639562855" MODIFIED="1316081898897" TEXT="notify UI"/>
</node>
</node>
</node>
<node CREATED="1316081465366" ID="ID_1946981405" MODIFIED="1316081982176" TEXT="all other cases">
<node CREATED="1316081982520" ID="ID_1965096038" MODIFIED="1316082112130" TEXT="see above">
<arrowlink DESTINATION="ID_1700320272" ENDARROW="Default" ENDINCLINATION="159;35;" ID="Arrow_ID_1880189841" STARTARROW="None" STARTINCLINATION="-18;-9;"/>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1316080463082" ID="ID_1145333738" MODIFIED="1316080468521" POSITION="right" TEXT="Data structures">
<node CREATED="1315851425622" ID="ID_1862061768" MODIFIED="1315851440825" TEXT="Changeset Class">
<node CREATED="1316080479196" ID="ID_88464527" MODIFIED="1316080481978" TEXT="description">
<node CREATED="1316080482395" ID="ID_1006562196" MODIFIED="1316080512548" TEXT="records all changes by persistence layer resulting from a persistence operation"/>
</node>
<node CREATED="1315851486883" ID="ID_1198550713" MODIFIED="1316080477866" TEXT="operations">
<node CREATED="1315851441203" ID="ID_1667620772" MODIFIED="1315851449752" TEXT="undelete"/>
<node CREATED="1315851450130" ID="ID_933657031" MODIFIED="1315851462270" TEXT="link"/>
<node CREATED="1315851462656" ID="ID_1641465099" MODIFIED="1315851463646" TEXT="create"/>
<node CREATED="1315851464368" ID="ID_1920069650" MODIFIED="1315851465702" TEXT="unlink"/>
<node CREATED="1315851466008" ID="ID_1155211252" MODIFIED="1315851466911" TEXT="save"/>
<node CREATED="1315851467288" ID="ID_956481363" MODIFIED="1315851469206" TEXT="delete"/>
</node>
<node CREATED="1315851494868" ID="ID_1344876931" MODIFIED="1315851512005" TEXT="started by controller"/>
<node CREATED="1315851512350" ID="ID_1184533419" MODIFIED="1315851533181" TEXT="recorded by persistence"/>
</node>
<node CREATED="1316080529433" ID="ID_1872265347" MODIFIED="1316080534640" TEXT="History Table">
<node CREATED="1316080535065" ID="ID_1844459620" MODIFIED="1316080541213" TEXT="description">
<node CREATED="1316080541678" ID="ID_378473972" MODIFIED="1316080580625" TEXT="holds all information about versionable and/or replayable steps"/>
</node>
<node CREATED="1316080587157" ID="ID_1570738881" MODIFIED="1316080591691" TEXT="fields">
<node CREATED="1316080620568" ID="ID_1176564443" MODIFIED="1316080625207" TEXT="user"/>
<node CREATED="1316080625600" ID="ID_1067550631" MODIFIED="1316080633447" TEXT="controller"/>
<node CREATED="1316080859896" ID="ID_1778088556" MODIFIED="1316080863078" TEXT="timestamp"/>
<node CREATED="1316080863456" ID="ID_768415659" MODIFIED="1316080864543" TEXT="data">
<node CREATED="1316080877643" ID="ID_94461536" MODIFIED="1316080884098" TEXT="controller specific"/>
</node>
</node>
<node CREATED="1316080592013" ID="ID_776909439" MODIFIED="1316080609472" TEXT="0..1 per controller execution"/>
</node>
<node CREATED="1316080889892" ID="ID_1773634414" MODIFIED="1316080895131" TEXT="History Context Table">
<node CREATED="1316080895580" ID="ID_842225917" MODIFIED="1316080897868" TEXT="description">
<node CREATED="1316080898629" ID="ID_1553351929" MODIFIED="1316080921957" TEXT="links a history table entry to all involved contexts"/>
<node CREATED="1316080922935" ID="ID_1293149365" MODIFIED="1316080924534" TEXT="context">
<node CREATED="1316080924887" ID="ID_865824336" MODIFIED="1316080971140" TEXT="oid"/>
<node CREATED="1316080971534" ID="ID_1543492159" MODIFIED="1316081036706" TEXT="arbitary string"/>
</node>
</node>
<node CREATED="1316081002441" ID="ID_1337745389" MODIFIED="1316081005552" TEXT="fields">
<node CREATED="1316081006017" ID="ID_1843849521" MODIFIED="1316081013724" TEXT="link to history table entry"/>
<node CREATED="1316081014062" ID="ID_926551606" MODIFIED="1316081015613" TEXT="oid"/>
<node CREATED="1316081015934" ID="ID_1805777994" MODIFIED="1316081027297" TEXT="arbitary context key"/>
</node>
</node>
</node>
</node>
</map>
